(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"1hji":function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),a=r.n(n),o=r("jg00"),l={action:"/upload.do",multiple:!0,onStart(e){console.log("onStart",e,e.name)},onSuccess(e){console.log("onSuccess",e)},onError(e){console.log("onError",e)},beforeUpload(e,t){return console.log(flie,t),new Promise((t=>{console.log("start check"),setTimeout((()=>{console.log("check finished"),t(e)}),3e3)}))}};t["default"]=()=>a.a.createElement("div",{style:{margin:100}},a.a.createElement("div",null,a.a.createElement(o["a"],l)))},PpiC:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function a(e,t){if(null==e)return{};var r,a,o=n(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,"a",(function(){return a}))},jg00:function(e,t,r){"use strict";var n=r("0Owb"),a=r("q1tI"),o=r.n(a),l=r("qLMh"),c=r("9og8"),s=r("tJVT"),i=r("PpiC"),u=new Date,d=0;function p(){return"".concat(u,"-").concat(++d)}var f=(e,t)=>{if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",a=e.type||"";a.replace(/\/.*$/,"");return r.some((e=>{var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var r=n.toLowerCase(),o=t.toLowerCase(),l=[o];return".jpg"!==o&&".jpeg"!==o||(l=[".jpg",".jpeg"]),l.some((e=>r.endsWith(e)))}return a===t||!!/^\w+$/.test(t)&&(alert("Upload takes an invalidate 'accept' type ".concat(t," Skip for check")),!0)}))}return!0};function m(e,t){var r="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status),n=new Error(r);return n.status=t.status,n.method=e.method,n.url=e.action,n}function b(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(r){return t}}function h(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var r=new FormData;e.data&&Object.keys(e.data).forEach((t=>{var n=e.data[t];Array.isArray(n)?n.forEach((e=>{r.append("".concat(t,"[]"),e)})):r.append(t,n)})),e.file instanceof Blob?r.append(e.filename,e.file,e.file):r.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(m(optionxhr),b(t)):e.onSuccess(b(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var n=e.headers||{};return Object.keys(n).forEach((e=>{null!==n[e]&&t.setRequestHeader(e,n[e])})),t.send(r),{abort(){t.abort()}}}var v=["style","id","data","className","disabled","multiple","multipart","accept","children","directory","onMouseEnter","onMouseLeave","openFileDialogOnClick","beforeUpload","onBatchStart","onSuccess","onStart","onError","action","customRequest","withCredentials","headers","name","method","onProgress"],g=e=>{e.style;var t=e.id,r=e.data,u=(e.className,e.disabled),d=e.multiple,m=(e.multipart,e.accept),b=e.children,g=e.directory,y=e.onMouseEnter,E=e.onMouseLeave,O=e.openFileDialogOnClick,j=e.beforeUpload,w=e.onBatchStart,k=e.onSuccess,S=e.onStart,C=e.onError,x=e.action,P=e.customRequest,F=e.withCredentials,M=e.headers,q=e.name,L=e.method,A=e.onProgress,R=(Object(i["a"])(e,v),Object(a["useState"])(p())),U=Object(s["a"])(R,2),D=U[0],I=U[1],J={},N=Object(a["useState"])(!0),B=Object(s["a"])(N,2),T=B[0],$=B[1],H=Object(a["useRef"])(null),V=e=>{var t=e.target.files,r=[...Array.from(t)].filter((e=>!g&&f(e,m)));X(r),Q()},K=t=>{var r=H.current;if(r){var n=e.children,a=e.onClick;if(n&&"button"===n.type){var o,l=r.parentNode;l.focus(),null===(o=l.querySelector("button"))||void 0===o||o.blur()}r.click(),a&&a(t)}},W=e=>{"Enter"===e.key&&K(e)};Object(a["useEffect"])((()=>($(!0),()=>{$(!1),Y()})),[T]);var X=e=>{var t=[...e],r=t.map((e=>(e.uid=p(),z(e,t))));Promise.all(r).then((e=>{null===w||void 0===w||w(e.map((e=>{var t=e.origin,r=e.parsedFile;return{file:t,parsedFile:r}}))),e.filter((e=>null!==e.parsedFile)).forEach((e=>{G(e)}))}))},z=function(){var e=Object(c["a"])(Object(l["a"])().mark((function e(t,n){var a,o,c,s,i,u;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,!j){e.next=14;break}return e.prev=2,e.next=5,j(t,n);case 5:a=e.sent,console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),a=!1;case 12:if(!1!==a){e.next=14;break}return e.abrupt("return",{origin:t,action:null,data:null,parsedFile:null});case 14:if("function"!==typeof x){e.next=20;break}return e.next=17,x(t);case 17:o=e.sent,e.next=21;break;case 20:o=x;case 21:if("function"!==typeof r){e.next=27;break}return e.next=24,r(t);case 24:c=e.sent,e.next=28;break;case 27:c=r;case 28:return s="object"!==typeof a&&"string"!==typeof a||!a?t:a,i=s instanceof File?s:new File([s],t.name,{type:t.type}),u=i,u.uid=t.uid,e.abrupt("return",{origin:t,data:c,parsedFile:u,action:o});case 33:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}(),G=e=>{var t=e.data,r=e.origin,n=e.action,a=e.parsedFile;if(T){var o=r.uid,l=P||h,c={action:n,filename:q,data:t,file:a,headers:M,withCredentials:F,method:L||"post",onProgress:e=>{null===A||void 0===A||A(e,a)},onSuccess:(e,t)=>{null===k||void 0===k||k(e,a,t),delete J[o]},onError:(e,t)=>{null===C||void 0===C||C(e,t,a),delete J[o]}};S(r),J[o]=l(c)}},Q=()=>{I(p())},Y=e=>{if(e){var t=e.uid?e.uid:e;J[t]&&J[t].abort&&J[t].abort(),delete J[t]}else Object.keys(J).forEach((e=>{J[e]&&J[e].abort&&J[e].abort(),delete J[e]}))},Z=u?{}:{onClick:O?K:()=>{},onKeyDown:O?W:()=>{},onMouseEnter:y,onMouseLeave:E,tabIndex:"0"};return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",Object(n["a"])({},Z,{id:t,ref:H,type:"file",key:D,accept:m,multiple:d,onChange:V})),b)},y=g;var E=e=>{e.style,e.id,e.className,e.disabled,e.action,e.onBatchStart,e.data,e.headers,e.name,e.multipart,e.onStart,e.onError,e.onSuccess,e.onProgress,e.multiple,e.method,e.accept,e.directory,e.onMouseEnter,e.onMouseLeave,e.beforeUpload,e.customRequest,e.withCredentials,e.openFileDialogOnClick;var t=Object(a["useRef"])(null);return o.a.createElement(y,Object(n["a"])({},e,{ref:t}))};t["a"]=E},sAC5:function(e,t,r){"use strict";r.r(t);var n=r("0Owb"),a=r("tJVT"),o=r("q1tI"),l=r.n(o),c=r("jg00"),s={action:"upload/do",data:{a:1,b:2},multiple:!0,beforeUpload(e){console.log("beforeUpload",e.name)},onStart(e){console.log("onStart",e.name)},onSuccess(e){console.log("onSuccess",e)},onProgress(e,t){console.log("onProgress",Math.round(e.percent),t.name)},onError(e){console.log("onError",e)}};t["default"]=()=>{var e=Object(o["useState"])(!1),t=Object(a["a"])(e,2),r=t[0],i=t[1],u=()=>{i(!0)};return r?null:l.a.createElement("div",{style:{margin:100,width:200,height:500}},l.a.createElement("h2",null,"\u56fa\u5b9a\u4f4d\u7f6e"),l.a.createElement("div",null,l.a.createElement(c["a"],s,l.a.createElement("a",null,"\u5f00\u59cb\u4e0a\u4f20"))),l.a.createElement("div",{style:{height:100}},l.a.createElement(c["a"],Object(n["a"])({},s,{style:{display:"inline-block"}}),l.a.createElement("a",null,"\u5f00\u59cb\u4e0a\u4f202"))),l.a.createElement("button",{type:"button",onClick:u},"destroy"))}}}]);