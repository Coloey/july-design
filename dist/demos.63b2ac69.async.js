(self.webpackChunkjuly_design=self.webpackChunkjuly_design||[]).push([[433],{79666:function(r,h,t){"use strict";t.r(h);var j=t(97857),l=t.n(j),s=t(5574),E=t.n(s),v=t(67294),y=t(62280),d=t(85893),b={action:"upload/do",data:{a:1,b:2},multiple:!0,beforeUpload:function(p){console.log("beforeUpload",p.name)},onStart:function(p){console.log("onStart",p.name)},onSuccess:function(p){console.log("onSuccess",p)},onProgress:function(p,R){console.log("onProgress",Math.round(p.percent),R.name)},onError:function(p){console.log("onError",p)}};h.default=function(){var P=(0,v.useState)(!1),p=E()(P,2),R=p[0],q=p[1],w=function(){q(!0)};return R?null:(0,d.jsxs)("div",{style:{margin:100,width:200,height:500},children:[(0,d.jsx)("h2",{children:"\u56FA\u5B9A\u4F4D\u7F6E"}),(0,d.jsx)("div",{children:(0,d.jsx)(y.Z,l()(l()({},b),{},{children:(0,d.jsx)("a",{children:"\u5F00\u59CB\u4E0A\u4F20"})}))}),(0,d.jsx)("div",{style:{height:100},children:(0,d.jsx)(y.Z,l()(l()({},b),{},{style:{display:"inline-block"},children:(0,d.jsx)("a",{children:"\u5F00\u59CB\u4E0A\u4F202"})}))}),(0,d.jsx)("button",{type:"button",onClick:w,children:"destroy"})]})}},43441:function(r,h,t){"use strict";t.r(h);var j=t(97857),l=t.n(j),s=t(67294),E=t(62280),v=t(85893),y={action:"/upload.do",multiple:!0,onStart:function(b){console.log("onStart",b,b.name)},onSuccess:function(b){console.log("onSuccess",b)},onError:function(b){console.log("onError",b)},beforeUpload:function(b,P){return console.log(flie,P),new Promise(function(p){console.log("start check"),setTimeout(function(){console.log("check finished"),p(b)},3e3)})}};h.default=function(){return(0,v.jsx)("div",{style:{margin:100},children:(0,v.jsx)("div",{children:(0,v.jsx)(E.Z,l()({},y))})})}},62280:function(r,h,t){"use strict";t.d(h,{Z:function(){return Ae}});var j=t(97857),l=t.n(j),s=t(67294),E=t(15009),v=t.n(E),y=t(52677),d=t.n(y),b=t(99289),P=t.n(b),p=t(19632),R=t.n(p),q=t(5574),w=t.n(q),le=t(13769),ge=t.n(le),_e=new Date,je=0;function ee(){return"".concat(_e,"-").concat(++je)}var Se=function(n,e){if(n&&e){var M=Array.isArray(e)?e:e.split(","),S=n.name||"",c=n.type||"",_=c.replace(/\/.*$/,"");return M.some(function(A){var D=A.trim();if(/^\*(\/\*)?$/.test(A))return!0;if(D.charAt(0)==="."){var W=S.toLowerCase(),U=D.toLowerCase(),F=[U];return(U===".jpg"||U===".jpeg")&&(F=[".jpg",".jpeg"]),F.some(function(H){return W.endsWith(H)})}return c===D?!0:/^\w+$/.test(D)?(alert("Upload takes an invalidate 'accept' type ".concat(D," Skip for check")),!0):!1})}return!0};function Me(n,e){var M="cannot ".concat(n.method," ").concat(n.action," ").concat(e.status),S=new Error(M);return S.status=e.status,S.method=n.method,S.url=n.action,S}function de(n){var e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch(M){return e}}function Ce(n){var e=new XMLHttpRequest;n.onProgress&&e.upload&&(e.upload.onprogress=function(_){_.total>0&&(_.percent=_.loaded/_.total*100),n.onProgress(_)});var M=new FormData;n.data&&Object.keys(n.data).forEach(function(c){var _=n.data[c];if(Array.isArray(_)){_.forEach(function(A){M.append("".concat(c,"[]"),A)});return}M.append(c,_)}),n.file instanceof Blob?M.append(n.filename,n.file,n.file):M.append(n.filename,n.file),e.onerror=function(_){n.onError(_)},e.onload=function(){return e.status<200||e.status>=300?n.onError(Me(optionxhr),de(e)):n.onSuccess(de(e),e)},e.open(n.method,n.action,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var S=n.headers||{};return Object.keys(S).forEach(function(c){S[c]!==null&&e.setRequestHeader(c,S[c])}),e.send(M),{abort:function(){e.abort()}}}var te=t(85893),Pe=["style","id","data","className","disabled","multiple","multipart","accept","children","directory","onMouseEnter","onMouseLeave","openFileDialogOnClick","beforeUpload","onBatchStart","onSuccess","onStart","onError","action","customRequest","withCredentials","headers","name","method","onProgress"],De=function(e){var M=e.style,S=e.id,c=e.data,_=e.className,A=e.disabled,D=e.multiple,W=e.multipart,U=e.accept,F=e.children,H=e.directory,Z=e.onMouseEnter,ce=e.onMouseLeave,K=e.openFileDialogOnClick,ne=e.beforeUpload,T=e.onBatchStart,G=e.onSuccess,J=e.onStart,X=e.onError,B=e.action,fe=e.customRequest,ve=e.withCredentials,z=e.headers,me=e.name,he=e.method,Q=e.onProgress,Ue=ge()(e,Pe),ye=(0,s.useState)(ee()),ae=w()(ye,2),V=ae[0],be=ae[1],g={},pe=(0,s.useState)(!0),$=w()(pe,2),oe=$[0],k=$[1],se=(0,s.useRef)(null),Y=function(i){var a=i.target.files,m=R()(Array.from(a)).filter(function(u){return!H&&Se(u,U)});ie(m),Te()},ue=function(i){var a=se.current;if(a){var m=e.children,u=e.onClick;if(m&&m.type==="button"){var f,C=a.parentNode;C.focus(),(f=C.querySelector("button"))===null||f===void 0||f.blur()}a.click(),u&&u(i)}},Ee=function(i){i.key==="Enter"&&ue(i)};(0,s.useEffect)(function(){return k(!0),function(){k(!1),Be()}},[oe]);var ie=function(i){var a=R()(i),m=a.map(function(u){return u.uid=ee(),Fe(u,a)});Promise.all(m).then(function(u){T==null||T(u.map(function(f){var C=f.origin,O=f.parsedFile;return{file:C,parsedFile:O}})),u.filter(function(f){return f.parsedFile!==null}).forEach(function(f){Re(f)})})},Fe=function(){var x=P()(v()().mark(function i(a,m){var u,f,C,O,N,L;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=a,!ne){o.next=14;break}return o.prev=2,o.next=5,ne(a,m);case 5:u=o.sent,console.log(u),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(2),u=!1;case 12:if(u!==!1){o.next=14;break}return o.abrupt("return",{origin:a,action:null,data:null,parsedFile:null});case 14:if(typeof B!="function"){o.next=20;break}return o.next=17,B(a);case 17:f=o.sent,o.next=21;break;case 20:f=B;case 21:if(typeof c!="function"){o.next=27;break}return o.next=24,c(a);case 24:C=o.sent,o.next=28;break;case 27:C=c;case 28:return O=(d()(u)==="object"||typeof u=="string")&&u?u:a,O instanceof File?N=O:N=new File([O],a.name,{type:a.type}),L=N,L.uid=a.uid,o.abrupt("return",{origin:a,data:C,parsedFile:L,action:f});case 33:case"end":return o.stop()}},i,null,[[2,9]])}));return function(a,m){return x.apply(this,arguments)}}(),Re=function(i){var a=i.data,m=i.origin,u=i.action,f=i.parsedFile;if(oe){var C=m.uid,O=fe||Ce,N={action:u,filename:me,data:a,file:f,headers:z,withCredentials:ve,method:he||"post",onProgress:function(I){Q==null||Q(I,f)},onSuccess:function(I,o){G==null||G(I,f,o),delete g[C]},onError:function(I,o){X==null||X(I,o,f),delete g[C]}};J(m),g[C]=O(N)}},Te=function(){be(ee())},Be=function(i){if(i){var a=i.uid?i.uid:i;g[a]&&g[a].abort&&g[a].abort(),delete g[a]}else Object.keys(g).forEach(function(m){g[m]&&g[m].abort&&g[m].abort(),delete g[m]})},Le=A?{}:{onClick:K?ue:function(){},onKeyDown:K?Ee:function(){},onMouseEnter:Z,onMouseLeave:ce,tabIndex:"0"};return(0,te.jsxs)(te.Fragment,{children:[(0,s.createElement)("input",l()(l()({},Le),{},{id:S,ref:se,type:"file",key:V,accept:U,multiple:D,onChange:Y})),F]})},xe=De;function re(){}var Oe=function(e){var M=e.style,S=e.id,c=e.className,_=e.disabled,A=e.action,D=e.onBatchStart,W=e.data,U=W===void 0?{}:W,F=e.headers,H=F===void 0?{}:F,Z=e.name,ce=Z===void 0?"file":Z,K=e.multipart,ne=K===void 0?!1:K,T=e.onStart,G=T===void 0?re:T,J=e.onError,X=J===void 0?re:J,B=e.onSuccess,fe=B===void 0?re:B,ve=e.onProgress,z=e.multiple,me=z===void 0?!1:z,he=e.method,Q=e.accept,Ue=e.directory,ye=e.onMouseEnter,ae=e.onMouseLeave,V=e.beforeUpload,be=V===void 0?null:V,g=e.customRequest,pe=g===void 0?null:g,$=e.withCredentials,oe=$===void 0?!1:$,k=e.openFileDialogOnClick,se=k===void 0?!0:k,Y=(0,s.useRef)(null),ue=function(ie){Y.current.abort(ie)};return(0,te.jsx)(xe,l()(l()({},e),{},{ref:Y}))},Ae=Oe},96446:function(r,h,t){var j=t(37923);function l(s){if(Array.isArray(s))return j(s)}r.exports=l,r.exports.__esModule=!0,r.exports.default=r.exports},96936:function(r){function h(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}r.exports=h,r.exports.__esModule=!0,r.exports.default=r.exports},88619:function(r){function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.exports=h,r.exports.__esModule=!0,r.exports.default=r.exports},13769:function(r,h,t){var j=t(48541);function l(s,E){if(s==null)return{};var v=j(s,E),y,d;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(s);for(d=0;d<b.length;d++)y=b[d],!(E.indexOf(y)>=0)&&Object.prototype.propertyIsEnumerable.call(s,y)&&(v[y]=s[y])}return v}r.exports=l,r.exports.__esModule=!0,r.exports.default=r.exports},48541:function(r){function h(t,j){if(t==null)return{};var l={},s=Object.keys(t),E,v;for(v=0;v<s.length;v++)E=s[v],!(j.indexOf(E)>=0)&&(l[E]=t[E]);return l}r.exports=h,r.exports.__esModule=!0,r.exports.default=r.exports},19632:function(r,h,t){var j=t(96446),l=t(96936),s=t(96263),E=t(88619);function v(y){return j(y)||l(y)||s(y)||E()}r.exports=v,r.exports.__esModule=!0,r.exports.default=r.exports}}]);
