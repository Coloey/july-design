(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{PpiC:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function a(e,t){if(null==e)return{};var r,a,o=n(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,"a",(function(){return a}))},sAC5:function(e,t,r){"use strict";r.r(t);var n=r("0Owb"),a=r("tJVT"),o=r("q1tI"),l=r.n(o),c=r("qLMh"),i=r("9og8"),s=r("PpiC"),u=new Date,d=0;function p(){return"".concat(u,"-").concat(++d)}var f=(e,t)=>{if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",a=e.type||"";a.replace(/\/.*$/,"");return r.some((e=>{var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var r=n.toLowerCase(),o=t.toLowerCase(),l=[o];return".jpg"!==o&&".jpeg"!==o||(l=[".jpg",".jpeg"]),l.some((e=>r.endsWith(e)))}return a===t||!!/^\w+$/.test(t)&&(alert("Upload takes an invalidate 'accept' type ".concat(t," Skip for check")),!0)}))}return!0};function b(e,t){var r="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status),n=new Error(r);return n.status=t.status,n.method=e.method,n.url=e.action,n}function m(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(r){return t}}function h(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var r=new FormData;e.data&&Object.keys(e.data).forEach((t=>{var n=e.data[t];Array.isArray(n)?n.forEach((e=>{r.append("".concat(t,"[]"),e)})):r.append(t,n)})),e.file instanceof Blob?r.append(e.filename,e.file,e.file):r.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(b(optionxhr),m(t)):e.onSuccess(m(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var n=e.headers||{};return Object.keys(n).forEach((e=>{null!==n[e]&&t.setRequestHeader(e,n[e])})),t.send(r),{abort(){t.abort()}}}var v=["style","id","data","className","disabled","multiple","multipart","accept","children","directory","onMouseEnter","onMouseLeave","openFileDialogOnClick","beforeUpload","onBatchStart","onSuccess","onStart","onError","action","customRequest","withCredentials","headers","name","method","onProgress"],y=e=>{e.style;var t=e.id,r=e.data,u=(e.className,e.disabled),d=e.multiple,b=(e.multipart,e.accept),m=e.children,y=e.directory,g=e.onMouseEnter,E=e.onMouseLeave,O=e.openFileDialogOnClick,w=e.beforeUpload,j=e.onBatchStart,k=e.onSuccess,S=e.onStart,C=e.onError,x=e.action,F=e.customRequest,P=e.withCredentials,M=e.headers,q=e.name,D=e.method,L=e.onProgress,R=(Object(s["a"])(e,v),Object(o["useState"])(p())),A=Object(a["a"])(R,2),U=A[0],N=A[1],B={},J=Object(o["useState"])(!0),I=Object(a["a"])(J,2),$=I[0],H=I[1],T=Object(o["useRef"])(null),K=e=>{var t=e.target.files,r=[...t].filter((e=>!y&&f(e,b)));z(r),Y()},V=t=>{var r=T.current;if(r){var n=e.children,a=e.onClick;if(n&&"button"===n.type){var o,l=r.parentNode;l.focus(),null===(o=l.querySelector("button"))||void 0===o||o.blur()}r.click(),a&&a(t)}},W=e=>{"Enter"===e.key&&V(e)},X=e=>{};Object(o["useEffect"])((()=>(H(!0),()=>{H(!1),Z()})),[$]);var z=e=>{var t=[...e],r=t.map((e=>(e.uid=p(),G(e,t))));Promise.all(r).then((e=>{null===j||void 0===j||j(e.map((e=>{var t=e.origin,r=e.parsedFile;return{file:t,parsedFile:r}}))),e.filter((e=>null!==e.parsedFile)).forEach((e=>{Q(e)}))}))},G=function(){var e=Object(i["a"])(Object(c["a"])().mark((function e(t,n){var a,o,l,i,s,u;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,!w){e.next=13;break}return e.prev=2,e.next=5,w(t,n);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),a=!1;case 11:if(!1!==a){e.next=13;break}return e.abrupt("return",{origin:t,action:null,data:null,parsedFile:null});case 13:if("function"!==typeof x){e.next=19;break}return e.next=16,x(t);case 16:o=e.sent,e.next=20;break;case 19:o=x;case 20:if("function"!==typeof r){e.next=26;break}return e.next=23,r(t);case 23:l=e.sent,e.next=27;break;case 26:l=r;case 27:return i="object"!==typeof a&&"string"!==typeof a||!a?t:a,s=i instanceof File?i:new File([i],t.name,{type:t.type}),u=s,u.uid=t.uid,e.abrupt("return",{origin:t,data:l,parsedFile:u,action:o});case 32:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}(),Q=e=>{var t=e.data,r=e.origin,n=e.action,a=e.parsedFile;if($){var o=r.uid,l=F||h,c={action:n,filename:q,data:t,file:a,headers:M,withCredentials:P,method:D||"post",onProgress:e=>{null===L||void 0===L||L(e,a)},onSuccess:(e,t)=>{null===k||void 0===k||k(e,a,t),delete B[o]},onError:(e,t)=>{null===C||void 0===C||C(e,t,a),delete B[o]}};S(r),B[o]=l(c)}},Y=()=>{N(p())},Z=e=>{if(e){var t=e.uid?e.uid:e;B[t]&&B[t].abort&&B[t].abort(),delete B[t]}else Object.keys(B).forEach((e=>{B[e]&&B[e].abort&&B[e].abort(),delete B[e]}))},_=u?{}:{onClick:O?V:()=>{},onKeyDown:O?W:()=>{},onMouseEnter:g,onMouseLeave:E,onDrop:X,onDragOver:X,tabIndex:"0"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",Object(n["a"])({},_,{id:t,ref:T,type:"file",key:U,accept:b,multiple:d,onChange:K})),m)},g=y;var E=e=>{e.style,e.id,e.className,e.disabled,e.action,e.onBatchStart,e.data,e.headers,e.name,e.multipart,e.onStart,e.onError,e.onSuccess,e.onProgress,e.multiple,e.method,e.accept,e.directory,e.onMouseEnter,e.onMouseLeave,e.beforeUpload,e.customRequest,e.withCredentials,e.openFileDialogOnClick;var t=Object(o["useRef"])(null);return l.a.createElement(g,Object(n["a"])({},e,{ref:t}))},O=E,w={action:"upload/do",data:{a:1,b:2},multiple:!0,beforeUpload(e){console.log("beforeUpload",e.name)},onStart(e){console.log("onStart",e.name)},onSuccess(e){console.log("onSuccess",e)},onProgress(e,t){console.log("onProgress",Math.round(e.percent),t.name)},onError(e){console.log("onError",e)}};t["default"]=()=>{var e=Object(o["useState"])(!1),t=Object(a["a"])(e,2),r=t[0],c=t[1],i=()=>{c(!0)};return r?null:l.a.createElement("div",{style:{margin:100,width:200,height:500}},l.a.createElement("h2",null,"\u56fa\u5b9a\u4f4d\u7f6e"),l.a.createElement("div",null,l.a.createElement(O,w,l.a.createElement("a",null,"\u5f00\u59cb\u4e0a\u4f20"))),l.a.createElement("div",{style:{height:100}},l.a.createElement(O,Object(n["a"])({},w,{style:{display:"inline-block"}}),l.a.createElement("a",null,"\u5f00\u59cb\u4e0a\u4f202"))),l.a.createElement("button",{type:"button",onClick:i},"destroy"))}}}]);