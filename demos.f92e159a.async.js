(self.webpackChunkjuly_design=self.webpackChunkjuly_design||[]).push([[433],{62118:function(r,m,t){"use strict";t.r(m);var p=t(42122),l=t.n(p),s=t(27424),b=t.n(s),v=t(67294),y=t(35148),d=t(85893),g={action:"upload/do",data:{a:1,b:2},multiple:!0,beforeUpload:function(E){console.log("beforeUpload",E.name)},onStart:function(E){console.log("onStart",E.name)},onSuccess:function(E){console.log("onSuccess",E)},onProgress:function(E,R){console.log("onProgress",Math.round(E.percent),R.name)},onError:function(E){console.log("onError",E)}};m.default=function(){var C=(0,v.useState)(!1),E=b()(C,2),R=E[0],q=E[1],N=function(){q(!0)};return R?null:(0,d.jsxs)("div",{style:{margin:100,width:200,height:500},children:[(0,d.jsx)("h2",{children:"\u56FA\u5B9A\u4F4D\u7F6E"}),(0,d.jsx)("div",{children:(0,d.jsx)(y.Z,l()(l()({},g),{},{children:(0,d.jsx)("a",{children:"\u5F00\u59CB\u4E0A\u4F20"})}))}),(0,d.jsx)("div",{style:{height:100},children:(0,d.jsx)(y.Z,l()(l()({},g),{},{style:{display:"inline-block"},children:(0,d.jsx)("a",{children:"\u5F00\u59CB\u4E0A\u4F202"})}))}),(0,d.jsx)("button",{type:"button",onClick:N,children:"destroy"})]})}},81091:function(r,m,t){"use strict";t.r(m);var p=t(42122),l=t.n(p),s=t(67294),b=t(35148),v=t(85893),y={action:"/upload.do",multiple:!0,onStart:function(g){console.log("onStart",g,g.name)},onSuccess:function(g){console.log("onSuccess",g)},onError:function(g){console.log("onError",g)},beforeUpload:function(g,C){return console.log(flie,C),new Promise(function(E){console.log("start check"),setTimeout(function(){console.log("check finished"),E(g)},3e3)})}};m.default=function(){return(0,v.jsx)("div",{style:{margin:100},children:(0,v.jsx)("div",{children:(0,v.jsx)(b.Z,l()({},y))})})}},35148:function(r,m,t){"use strict";t.d(m,{Z:function(){return De}});var p=t(42122),l=t.n(p),s=t(67294),b=t(17061),v=t.n(b),y=t(18698),d=t.n(y),g=t(17156),C=t.n(g),E=t(861),R=t.n(E),q=t(27424),N=t.n(q),le=t(70215),_e=t.n(le),je=new Date,pe=0;function ee(){return"".concat(je,"-").concat(++pe)}var Se=function(n,e){if(n&&e){var P=Array.isArray(e)?e:e.split(","),S=n.name||"",c=n.type||"",j=c.replace(/\/.*$/,"");return P.some(function(D){var x=D.trim();if(/^\*(\/\*)?$/.test(D))return!0;if(x.charAt(0)==="."){var W=S.toLowerCase(),U=x.toLowerCase(),F=[U];return(U===".jpg"||U===".jpeg")&&(F=[".jpg",".jpeg"]),F.some(function(H){return W.endsWith(H)})}return c===x?!0:/^\w+$/.test(x)?(alert("Upload takes an invalidate 'accept' type ".concat(x," Skip for check")),!0):!1})}return!0};function Pe(n,e){var P="cannot ".concat(n.method," ").concat(n.action," ").concat(e.status),S=new Error(P);return S.status=e.status,S.method=n.method,S.url=n.action,S}function de(n){var e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch(P){return e}}function Me(n){var e=new XMLHttpRequest;n.onProgress&&e.upload&&(e.upload.onprogress=function(j){j.total>0&&(j.percent=j.loaded/j.total*100),n.onProgress(j)});var P=new FormData;n.data&&Object.keys(n.data).forEach(function(c){var j=n.data[c];if(Array.isArray(j)){j.forEach(function(D){P.append("".concat(c,"[]"),D)});return}P.append(c,j)}),n.file instanceof Blob?P.append(n.filename,n.file,n.file):P.append(n.filename,n.file),e.onerror=function(j){n.onError(j)},e.onload=function(){return e.status<200||e.status>=300?n.onError(Pe(optionxhr),de(e)):n.onSuccess(de(e),e)},e.open(n.method,n.action,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var S=n.headers||{};return Object.keys(S).forEach(function(c){S[c]!==null&&e.setRequestHeader(c,S[c])}),e.send(P),{abort:function(){e.abort()}}}var te=t(85893),Ce=["style","id","data","className","disabled","multiple","multipart","accept","children","directory","onMouseEnter","onMouseLeave","openFileDialogOnClick","beforeUpload","onBatchStart","onSuccess","onStart","onError","action","customRequest","withCredentials","headers","name","method","onProgress"],xe=function(e){var P=e.style,S=e.id,c=e.data,j=e.className,D=e.disabled,x=e.multiple,W=e.multipart,U=e.accept,F=e.children,H=e.directory,Z=e.onMouseEnter,ce=e.onMouseLeave,k=e.openFileDialogOnClick,ne=e.beforeUpload,T=e.onBatchStart,G=e.onSuccess,J=e.onStart,X=e.onError,B=e.action,fe=e.customRequest,ve=e.withCredentials,z=e.headers,he=e.name,me=e.method,Q=e.onProgress,Ue=_e()(e,Ce),ye=(0,s.useState)(ee()),ae=N()(ye,2),V=ae[0],ge=ae[1],_={},Ee=(0,s.useState)(!0),K=N()(Ee,2),oe=K[0],$=K[1],se=(0,s.useRef)(null),Y=function(i){var a=i.target.files,h=R()(Array.from(a)).filter(function(u){return!H&&Se(u,U)});ie(h),Te()},ue=function(i){var a=se.current;if(a){var h=e.children,u=e.onClick;if(h&&h.type==="button"){var f,M=a.parentNode;M.focus(),(f=M.querySelector("button"))===null||f===void 0||f.blur()}a.click(),u&&u(i)}},be=function(i){i.key==="Enter"&&ue(i)};(0,s.useEffect)(function(){return $(!0),function(){$(!1),Be()}},[oe]);var ie=function(i){var a=R()(i),h=a.map(function(u){return u.uid=ee(),Fe(u,a)});Promise.all(h).then(function(u){T==null||T(u.map(function(f){var M=f.origin,A=f.parsedFile;return{file:M,parsedFile:A}})),u.filter(function(f){return f.parsedFile!==null}).forEach(function(f){Re(f)})})},Fe=function(){var O=C()(v()().mark(function i(a,h){var u,f,M,A,w,L;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=a,!ne){o.next=14;break}return o.prev=2,o.next=5,ne(a,h);case 5:u=o.sent,console.log(u),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(2),u=!1;case 12:if(u!==!1){o.next=14;break}return o.abrupt("return",{origin:a,action:null,data:null,parsedFile:null});case 14:if(typeof B!="function"){o.next=20;break}return o.next=17,B(a);case 17:f=o.sent,o.next=21;break;case 20:f=B;case 21:if(typeof c!="function"){o.next=27;break}return o.next=24,c(a);case 24:M=o.sent,o.next=28;break;case 27:M=c;case 28:return A=(d()(u)==="object"||typeof u=="string")&&u?u:a,A instanceof File?w=A:w=new File([A],a.name,{type:a.type}),L=w,L.uid=a.uid,o.abrupt("return",{origin:a,data:M,parsedFile:L,action:f});case 33:case"end":return o.stop()}},i,null,[[2,9]])}));return function(a,h){return O.apply(this,arguments)}}(),Re=function(i){var a=i.data,h=i.origin,u=i.action,f=i.parsedFile;if(oe){var M=h.uid,A=fe||Me,w={action:u,filename:he,data:a,file:f,headers:z,withCredentials:ve,method:me||"post",onProgress:function(I){Q==null||Q(I,f)},onSuccess:function(I,o){G==null||G(I,f,o),delete _[M]},onError:function(I,o){X==null||X(I,o,f),delete _[M]}};J(h),_[M]=A(w)}},Te=function(){ge(ee())},Be=function(i){if(i){var a=i.uid?i.uid:i;_[a]&&_[a].abort&&_[a].abort(),delete _[a]}else Object.keys(_).forEach(function(h){_[h]&&_[h].abort&&_[h].abort(),delete _[h]})},Le=D?{}:{onClick:k?ue:function(){},onKeyDown:k?be:function(){},onMouseEnter:Z,onMouseLeave:ce,tabIndex:"0"};return(0,te.jsxs)(te.Fragment,{children:[(0,s.createElement)("input",l()(l()({},Le),{},{id:S,ref:se,type:"file",key:V,accept:U,multiple:x,onChange:Y})),F]})},Oe=xe;function re(){}var Ae=function(e){var P=e.style,S=e.id,c=e.className,j=e.disabled,D=e.action,x=e.onBatchStart,W=e.data,U=W===void 0?{}:W,F=e.headers,H=F===void 0?{}:F,Z=e.name,ce=Z===void 0?"file":Z,k=e.multipart,ne=k===void 0?!1:k,T=e.onStart,G=T===void 0?re:T,J=e.onError,X=J===void 0?re:J,B=e.onSuccess,fe=B===void 0?re:B,ve=e.onProgress,z=e.multiple,he=z===void 0?!1:z,me=e.method,Q=e.accept,Ue=e.directory,ye=e.onMouseEnter,ae=e.onMouseLeave,V=e.beforeUpload,ge=V===void 0?null:V,_=e.customRequest,Ee=_===void 0?null:_,K=e.withCredentials,oe=K===void 0?!1:K,$=e.openFileDialogOnClick,se=$===void 0?!0:$,Y=(0,s.useRef)(null),ue=function(ie){Y.current.abort(ie)};return(0,te.jsx)(Oe,l()(l()({},e),{},{ref:Y}))},De=Ae},63405:function(r,m,t){var p=t(73897);function l(s){if(Array.isArray(s))return p(s)}r.exports=l,r.exports.__esModule=!0,r.exports.default=r.exports},79498:function(r){function m(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}r.exports=m,r.exports.__esModule=!0,r.exports.default=r.exports},42281:function(r){function m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}r.exports=m,r.exports.__esModule=!0,r.exports.default=r.exports},70215:function(r,m,t){var p=t(7071);function l(s,b){if(s==null)return{};var v=p(s,b),y,d;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(s);for(d=0;d<g.length;d++)y=g[d],!(b.indexOf(y)>=0)&&Object.prototype.propertyIsEnumerable.call(s,y)&&(v[y]=s[y])}return v}r.exports=l,r.exports.__esModule=!0,r.exports.default=r.exports},7071:function(r){function m(t,p){if(t==null)return{};var l={},s=Object.keys(t),b,v;for(v=0;v<s.length;v++)b=s[v],!(p.indexOf(b)>=0)&&(l[b]=t[b]);return l}r.exports=m,r.exports.__esModule=!0,r.exports.default=r.exports},861:function(r,m,t){var p=t(63405),l=t(79498),s=t(86116),b=t(42281);function v(y){return p(y)||l(y)||s(y)||b()}r.exports=v,r.exports.__esModule=!0,r.exports.default=r.exports}}]);
